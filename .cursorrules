# Kanban Vulnerability Management Board - Cursor Rules

## Project Overview
This is a React 18 application built with JavaScript (NOT TypeScript) for managing vulnerability tracking through a Kanban board interface. The project emphasizes clean code, performance, security, and accessibility.

## Core Technologies
- **Frontend**: React 18 with JavaScript (NO TypeScript)
- **State Management**: Redux Toolkit with custom middleware
- **Styling**: styled-components with responsive design
- **Drag & Drop**: React DnD for interactive components
- **Build Tool**: Create React App (CRA)

## Code Quality Standards

### Naming Conventions
- **Variables**: Use descriptive camelCase names
  - ‚úÖ `vulnerabilityTasks`, `selectedPriorityFilter`, `authenticatedUser`
  - ‚ùå `tasks`, `filter`, `user`

- **Functions**: Use descriptive verb-noun patterns
  - ‚úÖ `handleTaskDragEnd`, `validateUserEmail`, `sanitizeTaskInput`
  - ‚ùå `handle`, `validate`, `sanitize`

- **Components**: Use PascalCase with descriptive names
  - ‚úÖ `KanbanTaskCard`, `VulnerabilityBoard`, `TaskPrioritySelector`
  - ‚ùå `Card`, `Board`, `Selector`

- **Constants**: Use SCREAMING_SNAKE_CASE
  - ‚úÖ `PRIORITY_LEVELS`, `MAX_TASK_TITLE_LENGTH`, `API_ENDPOINTS`
  - ‚ùå `priorities`, `maxLength`, `endpoints`

### File Organization
```
src/
‚îú‚îÄ‚îÄ components/           # React components by domain
‚îÇ   ‚îú‚îÄ‚îÄ auth/            # Authentication components
‚îÇ   ‚îú‚îÄ‚îÄ kanban/          # Kanban board components
‚îÇ   ‚îú‚îÄ‚îÄ ui/              # Reusable UI components
‚îÇ   ‚îî‚îÄ‚îÄ common/          # Shared utility components
‚îú‚îÄ‚îÄ hooks/               # Custom React hooks
‚îú‚îÄ‚îÄ store/               # Redux store and slices
‚îú‚îÄ‚îÄ utils/               # Pure utility functions
‚îú‚îÄ‚îÄ constants/           # Application constants
‚îî‚îÄ‚îÄ styles/              # Global styles and themes
```

### Import Organization
Always organize imports in this order:
```javascript
// 1. React and React-related imports
import React, { useState, useEffect, useCallback } from 'react';

// 2. External library imports
import styled from 'styled-components';
import { useDispatch, useSelector } from 'react-redux';

// 3. Internal component imports
import TaskCard from './TaskCard';
import PrioritySelector from '../ui/PrioritySelector';

// 4. Utility and helper imports
import { sanitizeInput } from '../../utils/inputSanitization';
import { PRIORITY_LEVELS } from '../../constants/priorities';
```

## Performance Guidelines

### React Optimization
- **Use React.memo** for components that receive stable props
- **Use useCallback** for event handlers passed to child components
- **Use useMemo** for expensive calculations (filtering, sorting, transformations)
- **Optimize dependency arrays** in useEffect and custom hooks

```javascript
// ‚úÖ Good: Memoized component
const TaskCard = React.memo(({ task, onUpdate, onDelete }) => {
  const handleUpdate = useCallback((updates) => {
    onUpdate(task.id, updates);
  }, [task.id, onUpdate]);

  const priorityColor = useMemo(() => {
    return getPriorityColor(task.priority);
  }, [task.priority]);

  return (
    <Card onClick={handleUpdate}>
      {/* component content */}
    </Card>
  );
});

// ‚ùå Bad: No optimization
const TaskCard = ({ task, onUpdate, onDelete }) => {
  const handleUpdate = (updates) => {
    onUpdate(task.id, updates);
  };

  const priorityColor = getPriorityColor(task.priority);
  // ... rest of component
};
```

### State Management
- Use Redux Toolkit for complex state
- Normalize state structure for better performance
- Use selectors for derived state
- Implement proper action creators with type safety

## Security Requirements

### Input Sanitization
ALL user inputs must be sanitized using our utility functions:

```javascript
import { sanitizeTaskData, sanitizeEmail } from '../utils/inputSanitization';

// ‚úÖ Good: Sanitized input
const handleTaskSubmit = (taskData) => {
  const sanitizedTask = sanitizeTaskData(taskData);
  dispatch(createTask(sanitizedTask));
};

// ‚ùå Bad: Raw input
const handleTaskSubmit = (taskData) => {
  dispatch(createTask(taskData));
};
```

### Data Validation
- Validate all form inputs
- Use proper TypeScript-like JSDoc for type hints
- Implement client-side validation before submission
- Handle validation errors gracefully

## Error Handling

### Component Level
```javascript
// ‚úÖ Good: Comprehensive error handling
const TaskForm = ({ onSubmit }) => {
  const [errors, setErrors] = useState({});
  
  const handleSubmit = async (data) => {
    try {
      const sanitizedData = sanitizeTaskData(data);
      await onSubmit(sanitizedData);
      setErrors({});
    } catch (error) {
      console.error('Task submission failed:', error);
      setErrors({ submit: 'Failed to save task. Please try again.' });
    }
  };
  
  return (
    <form onSubmit={handleSubmit}>
      {/* form content */}
      {errors.submit && <ErrorMessage role="alert">{errors.submit}</ErrorMessage>}
    </form>
  );
};
```

### Async Operations
- Wrap all async operations in try-catch blocks
- Provide meaningful error messages to users
- Log errors for debugging (but not sensitive data)
- Implement proper loading states

## Accessibility Standards

### ARIA Labels
```javascript
// ‚úÖ Good: Proper ARIA attributes
<button
  onClick={handleDelete}
  aria-label={`Delete task: ${task.title}`}
  aria-describedby="delete-help-text"
>
  üóëÔ∏è
</button>

// ‚ùå Bad: No accessibility
<button onClick={handleDelete}>üóëÔ∏è</button>
```

### Keyboard Navigation
- Ensure all interactive elements are keyboard accessible
- Implement proper focus management
- Use semantic HTML elements when possible
- Test with screen readers

### Color and Contrast
- Maintain WCAG 2.1 AA color contrast ratios
- Don't rely solely on color to convey information
- Provide alternative text for images and icons

## Documentation Standards

### JSDoc Comments
All complex functions and components must have JSDoc comments:

```javascript
/**
 * Custom hook for managing Kanban board operations including tasks, columns, and labels.
 * Provides optimized filtering, sorting, and CRUD operations with memoization.
 * 
 * @returns {Object} Object containing:
 *   - columns: Array of column objects
 *   - tasks: Processed tasks object (filtered and sorted)
 *   - addNewTask: Function to create a new task
 *   - updateTask: Function to update task properties
 *   - removeTask: Function to delete a task
 * 
 * @example
 * const {
 *   columns,
 *   tasks,
 *   addNewTask,
 *   updateTask,
 *   removeTask
 * } = useTaskManagement();
 */
export function useTaskManagement() {
  // Implementation
}
```

### Component Documentation
```javascript
/**
 * KanbanTaskCard Component
 * 
 * A highly interactive task card component for the Kanban board with drag-and-drop,
 * context menus, labels, ratings, and priority indicators.
 * 
 * @param {Object} props Component props
 * @param {Object} props.task Task object containing id, title, priority, rating, labels, etc.
 * @param {Function} props.onTaskUpdate Callback for updating task properties
 * @param {Function} props.onTaskDelete Callback for deleting the task
 * @param {string} props.columnId ID of the column containing this task
 * @param {Array} props.availableLabels Array of available label objects
 * @returns {JSX.Element} Rendered task card component
 */
```

## Testing Guidelines

### Component Testing
- Test user interactions and edge cases
- Mock external dependencies
- Test accessibility features
- Verify error handling

### Integration Testing
- Test Redux state changes
- Test component interactions
- Test form submissions and validation

## Responsive Design

### Breakpoints
```javascript
const breakpoints = {
  mobile: '480px',
  tablet: '768px', 
  laptop: '1024px',
  desktop: '1366px'
};
```

### Mobile-First Approach
- Design for mobile first, then enhance for larger screens
- Use CSS Grid and Flexbox for layouts
- Ensure touch targets are at least 44px
- Test on multiple device sizes

## Bundle Optimization

### Code Splitting
- Implement route-based code splitting
- Lazy load non-critical components
- Optimize asset loading

### Bundle Analysis
```bash
# Analyze bundle size
npm run build
npx webpack-bundle-analyzer build/static/js/*.js
```

## Git Workflow

### Commit Messages
Use conventional commit format:
```
feat: add task priority filtering functionality
fix: resolve drag and drop performance issue
docs: update component documentation
refactor: optimize task rendering with React.memo
test: add unit tests for task validation
```

### Branch Naming
- `feature/task-priority-system`
- `bugfix/drag-drop-performance`
- `hotfix/security-vulnerability`

## Production Readiness

### Environment Variables
```env
REACT_APP_NAME=Kanban Board
REACT_APP_VERSION=1.0.0
REACT_APP_API_URL=https://api.example.com
REACT_APP_ENABLE_ANALYTICS=false
```

### Build Optimization
- Minimize bundle size
- Optimize images and assets
- Enable compression
- Implement proper caching strategies

## Code Review Checklist

### Before Submitting PR
- [ ] All functions have descriptive names
- [ ] All user inputs are sanitized
- [ ] Components use React.memo where appropriate
- [ ] Event handlers use useCallback
- [ ] Expensive calculations use useMemo
- [ ] ARIA labels are present for accessibility
- [ ] Error handling is comprehensive
- [ ] JSDoc comments are added for complex functions
- [ ] No console.logs in production code
- [ ] Tests pass and coverage is maintained

### Security Checklist
- [ ] No XSS vulnerabilities
- [ ] Input sanitization is applied
- [ ] No sensitive data in localStorage
- [ ] Proper authentication validation
- [ ] Error messages don't leak sensitive information

## Anti-Patterns to Avoid

### Performance Anti-Patterns
```javascript
// ‚ùå Bad: Inline object creation
<Component style={{ margin: '10px' }} />

// ‚úÖ Good: Stable reference
const componentStyle = { margin: '10px' };
<Component style={componentStyle} />

// ‚ùå Bad: Function creation in render
<button onClick={() => handleClick(id)}>Click</button>

// ‚úÖ Good: Memoized handler
const handleButtonClick = useCallback(() => handleClick(id), [id, handleClick]);
<button onClick={handleButtonClick}>Click</button>
```

### Security Anti-Patterns
```javascript
// ‚ùå Bad: Unsanitized input
const createTask = (title) => {
  setTasks([...tasks, { title }]);
};

// ‚úÖ Good: Sanitized input
const createTask = (title) => {
  const sanitizedTitle = sanitizeInput(title, { maxLength: 200 });
  setTasks([...tasks, { title: sanitizedTitle }]);
};
```

## Resources

- [React Performance Best Practices](https://react.dev/learn/render-and-commit)
- [Redux Toolkit Guide](https://redux-toolkit.js.org/)
- [Web Accessibility Guidelines](https://www.w3.org/WAI/WCAG21/quickref/)
- [Security Best Practices](https://owasp.org/www-project-top-ten/)

---

**Remember**: This is a production-ready application. Every line of code should be written with performance, security, accessibility, and maintainability in mind.
